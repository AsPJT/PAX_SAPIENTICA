# PAX SAPIENTICA ユーザーガイド
# 第1章：PAX SAPIENTICAへようこそ

PAX SAPIENTICAの世界へようこそ。この章では、本ソフトウェアの基本的な概念、主な特徴、そしてこの仕様書を最大限に活用するための手引きを説明します。歴史の複雑なタペストリーを解き明かすための強力なツールとして、PAX SAPIENTICAがどのように役立つかをご紹介します。

## 1.1 PAX SAPIENTICAとは：概要と目的

PAX SAPIENTICA（略称：PAXS）は、文献学、考古学、人類学といった複数の学術分野にまたがるデータを統合的に扱い、分析するために開発された、エージェントベースシミュレーション（Agent-Based Simulation, ABS）機能を搭載した地理情報システム（Geographic Information System, GIS）ソフトウェアです。

歴史という現象は、時間と空間、そしてそこに生きた人々の行動が複雑に絡み合って形成されます。PAX SAPIENTICAの根幹には、この歴史のダイナミズムを理解し、再現しようという目的があります。具体的には、歴史研究において不可欠な時間情報と空間情報をシームレスに統合し、さらに「人々の行動の積み重ね」としての歴史を、エージェントベースシミュレーションという手法を用いて動的に分析することを目指しています。

従来の地理情報システム（GIS）は、空間的な情報の扱いに長けている一方で、歴史研究において重要な時間軸の概念や、時代ごとの暦、考古学的な編年といった複雑な時間情報の管理には課題を抱えていました。また、既存のエージェントベースシミュレーションソフトウェアは、必ずしも歴史研究特有のニーズ（例えば、特定の時代の暦法や編年体系の表示・管理）に最適化されていませんでした。PAX SAPIENTICAは、これらの課題を克服し、歴史研究者が直面する特有の要求に応えるために設計されています。

このソフトウェアが文献学、考古学、人類学という複数の学問分野のデータを扱うことを明確に打ち出している点は、単に多機能なツールであることを超えて、これらの学問分野間の連携を促進し、新たな学際的知見の創出を支援するプラットフォームとしての役割を意図していることを示唆しています。

歴史という複雑な現象を多角的に解明しようとする現代の研究アプローチにおいて、このような学際的研究支援の思想は極めて重要です。本仕様書を通じて、これらの異なる分野のデータがPAX SAPIENTICAの中でどのように統合され、シミュレーションに活用されるのかを具体的に理解することで、ユーザーは本ソフトウェアの持つポテンシャルを最大限に引き出すことができるでしょう。

## 1.2 主な特徴と利点

PAX SAPIENTICAは、歴史研究を多角的に支援するための革新的な機能を数多く備えています。以下にその主な特徴と、それらがユーザーにもたらす利点を詳述します。

* 歴史情報の可視化:PAX SAPIENTICAは、歴史情報を直感的かつ効果的に可視化するための高度な機能群を提供します。各国・各時代の暦法に基づいた日付表示はもちろんのこと、特定の時代における古環境（地形、植生、海岸線など）を復元し、地図上に表示することができます。さらに、シミュレーションを通じて歴史上の人物や集団の移動軌跡を追跡したり、特定の年代に存在したとされる地形や考古学的な地物（古墳、集落跡など）を地図上にマッピングしたりすることが可能です。これらの機能は、歴史事象の空間的・時間的文脈を深く理解する上で不可欠であり、歴史学習や学術研究に新たな視点をもたらします。
* Agent-based Simulation (ABS) との統合:本ソフトウェアの最大の特徴の一つは、地理空間情報だけでなく、時間情報とエージェントベースシミュレーション（ABS）の機能を緊密に統合している点です。ABSは、個々のエージェント（自律的な行動主体、例えば人間や集落）の行動ルールと相互作用を定義し、それらが集合的にどのようなマクロな現象（例えば、集落の形成・拡大、人口動態の変化、文化の伝播など）を生み出すかをシミュレートする手法です。PAX SAPIENTICAは、このABS機能をGIS基盤上で実現することにより、歴史上の出来事や社会変動のプロセスを動的に分析し、そのメカニズムを探求することを可能にします。
* オープンソース・無償:PAX SAPIENTICAは、CC0（クリエイティブ・コモンズ・ゼロ）ライセンスの下でソースコードが公開されているオープンソースソフトウェア（OSS）であり、誰でも無償で利用し、改変し、再配布することができます。このオープンソースという選択には、単にソフトウェアを無償で提供するという以上の、学術研究における透明性、再現性、そして成果の永続性への強いコミットメントが込められています。特に考古学のように、数十年、あるいは数百年後の研究者が同一の条件下で過去の研究を検証・追試する必要が生じうる分野において、ソースコードが公開され、長期的に利用可能な環境が保証されることは極めて重要です。CC0ライセンスの採用は、この長期的な視点を具現化するものであり、学術ユーザーにとっては大きな安心材料となるでしょう。
* 汎用性と拡張性:PAX SAPIENTICAは、特定の地域や時代に限定されることなく、あらゆる歴史的文脈に対応できるよう、高い汎用性を持って設計されています。例えば、日本史の研究だけでなく、世界の様々な地域の歴史分析にも適用可能です。また、XYZ形式のタイルマップデータを自由に読み込んだり、ユーザーが独自に定義した地物（地名や遺構など）を地図上に追加したりできるなど、高いカスタマイズ性と拡張性を備えています。これにより、研究者は自身の研究対象やテーマに合わせて、ソフトウェア環境を柔軟に構築・調整することができます。

これらの特徴と利点が組み合わさることで、PAX SAPIENTICAは、歴史研究における新たな発見と深い洞察を促進する強力なプラットフォームとして機能します。

## 1.3 本仕様書の構成と読み進め方

本書は、PAX SAPIENTICAを初めて利用する研究者や学生の方々が、ソフトウェアの基本的な概念から、具体的なシミュレーション機能の詳細、さらには実践的な利用方法に至るまでを、段階的かつ体系的に理解できるように構成されています。歴史学、考古学、人類学、文献学など、多様な専門分野のユーザーが、それぞれの研究目的に応じて本ソフトウェアを効果的に活用できるよう、平易かつ詳細な解説を心がけています。以下に各章の概要を示します。

### 第1章：PAX SAPIENTICAへようこそ（本章）

本ソフトウェアの概要、開発目的、主な特徴と利点、そして本書の構成について説明します。

### 第2章：システム概要と動作環境

PAX SAPIENTICAのソフトウェアアーキテクチャの概観、対応プラットフォーム、必要な技術的要件、インストールとセットアップの基本的な手順、そして利用可能なドキュメントリソースやコミュニティについて解説します。

### 第3章：PAX SAPIENTICAの基本操作とGIS機能

ユーザーインターフェース（GUIおよびCUI）の概要、地図データの表示・操作、歴史的地理空間データのインポートと管理、環境復元機能、そして多様な歴史情報を可視化する手法について説明します。

### 第4章：エージェントベースシミュレーション（ABS）の核心

PAX SAPIENTICAにおけるABSの概念と目的、シミュレーション環境（空間、時間）の構築方法、エージェントの設計と定義（属性、行動ルール）、主要なシミュレーションモデル（集団移動、婚姻、出産など）の詳細、そしてエージェント間およびエージェントと環境の相互作用メカニズムについて深く掘り下げます。

### 第5章：シミュレーションの実行とデータ管理

シミュレーションプロジェクトの準備、入力データ（TSVファイル、GISデータ、パラメータ設定ファイル）の種類と形式、シミュレーションの具体的な実行手順、そして出力されるデータ（可視化結果、ログファイル、統計データ）の種類、形式、解釈方法について解説します。

### 第6章：高度な利用法：カスタマイズと拡張

既存のシミュレーションモデルのパラメータ調整によるカスタマイズ方法、新たなエージェントや行動ルール、環境要素を追加するための概念的なアプローチ、そしてPAX SAPIENTICAの将来的な拡張計画について紹介します。

### 第7章：実践チュートリアル：弥生時代～古墳時代の人口動態シミュレーション

具体的なシナリオ（例：日本の特定地域における人口変動）を設定し、データの準備からシミュレーションの実行、結果の確認・考察、さらにはパラメータ変更による比較分析までの一連の流れを体験できるステップバイステップのチュートリアルを提供します。

### 付録

本文書やPAX SAPIENTICAで用いられる専門用語の解説、参考資料や関連リンク集、そしてよくある質問（FAQ）とトラブルシューティングのヒントを掲載します。

### まとめ
読者の皆様の知識レベルや目的に応じて、本書を読み進めていただくことをお勧めします。例えば、まずはソフトウェアの全体像を把握したい方は第1章から第3章までを、具体的なシミュレーション手法に関心のある方は第4章と第5章を重点的に、そして実際に手を動かしてみたい方は第7章のチュートリアルから始めてみるのも良いでしょう。本書が、皆様のPAX SAPIENTICAを用いた研究活動の一助となれば幸いです。

# 第2章：システム概要と動作環境

本章では、PAX SAPIENTICAがどのような技術的基盤の上に構築され、どのような環境で動作するのか、そしてユーザーが利用を開始するにあたって必要となる基本的な情報を提供します。ソフトウェアのアーキテクチャ、対応プラットフォーム、インストール手順、そして参照すべきドキュメントについて理解を深めることで、よりスムーズにPAX SAPIENTICAの世界へ足を踏み入れることができるでしょう。

## 2.1 ソフトウェアアーキテクチャの概観

PAX SAPIENTICAは、その中核部分が主にC++言語で開発されており、これにより高い処理性能と将来的な機能拡張の柔軟性を両立する設計がなされています。歴史シミュレーション、特に多数のエージェントを扱うエージェントベースシミュレーション（ABS）は計算負荷が高くなりがちですが、C++の採用はこうした要求に応えるための選択と言えます。

本ソフトウェアのアーキテクチャにおける特筆すべき点は、地理情報システム（GIS）機能とABS機能が単に並存するのではなく、密接に統合されていることです。特に、処理負荷の高いABSのパフォーマンスを最優先に考慮し、ABSをシステム全体の基盤として位置づけ、その上にGIS機能を追加するというアプローチが採用されています。これは、例えばWebGIS（ウェブブラウザ上で動作するGIS）ではABSが必要とする計算速度を確保することが難しいといった課題認識を踏まえた戦略的な判断です。この設計思想により、ユーザーはリアルタイムに近いインタラクティブなシミュレーション操作や、比較的規模の大きなエージェント集団を扱うシミュレーションを実行できる可能性が拓かれます。このアーキテクチャ選択は、ソフトウェアが要求する計算資源の量や、一度に扱えるシミュレーションのスケール（エージェント数や空間の広さ、時間の長さなど）の上限にも影響を与えるため、ユーザーはこの点を理解しておくことが重要です。

PAX SAPIENTICAのシステムは、概念的にはいくつかの主要なコンポーネントから構成されています。これには、地理空間データやエージェント属性データなどを管理する「データ管理モジュール」、シミュレーションの実行とエージェントの行動ロジックを司る「シミュレーションエンジン」、そしてシミュレーション結果や各種情報を地図上やグラフで表示する「可視化モジュール」などが含まれます 1。これらのモジュールが連携し合うことで、PAX SAPIENTICAの多機能性が実現されています。

## 2.2 対応プラットフォームおよび必要な技術

PAX SAPIENTICAは、幅広い研究環境での利用を想定し、多様なプラットフォームおよび開発技術に対応しています。

### 対応オペレーティングシステム (OS):

GUI（グラフィカルユーザーインターフェース）環境としては、Windows、macOS、およびLinuxがサポートされています。また、Androidプラットフォームでの動作実績もあり、将来的にはiOSへの対応も視野に入れられています。これにより、デスクトップ環境だけでなく、モバイル環境での利用や教育現場での活用も期待されます。

### プログラミング言語:

ソフトウェアの主要部分はC++で記述されており、その割合は全体の約97.0%に及びます。開発にはC++17標準が採用されており、将来的にはC++20やC++23といったより新しい標準への移行も検討されています。これは、最新のプログラミング技術を取り入れ、ソフトウェアの性能向上や機能拡張を継続的に行っていくという開発姿勢の表れです。

### ビルドツール:

ソースコードからのビルドには、クロスプラットフォーム対応のビルドシステムジェネレータであるCMakeが採用されています。CMakeを用いることで、異なるOSやコンパイラ環境でも比較的容易にビルドプロセスを管理できます。

### GUIライブラリ:

PAX SAPIENTICAは、ユーザーインターフェースの描画のために複数のGUIライブラリをサポートしています。具体的には、SFML (Simple and Fast Multimedia Library)、OpenSiv3D、そしてDxLibが挙げられます。SFMLとOpenSiv3Dは主にデスクトップ環境向け、DxLibはWindows版に加えてAndroid版での描画にも利用されています。このように複数のGUIライブラリに対応している背景には、開発者の技術的選択、特定のプラットフォームへの最適化、あるいは異なる開発フェーズや目的に応じた実験的な採用など、複数の要因があります。ユーザーにとっては、どのGUIオプションを選択するかによって、インストール手順やアプリケーションの見た目、一部の機能に差異が生じる可能性があります。特にAndroid版では、DxLibが描画APIのラッパーライブラリとして機能し、OpenGLやVulkanといったグラフィックスAPIは直接サポートされないという技術的制約がある点に注意が必要です。

### 対応コンパイラ:

C++コードのコンパイルには、主要なコンパイラがサポートされています。具体的には、GNU Compiler Collection (GCC)、Clang、およびMicrosoft Visual C++ (MSVC) です。これにより、開発者やユーザーは自身の好む開発環境やOSに合わせてコンパイラを選択できます。

### まとめ
これらの技術的基盤により、PAX SAPIENTICAは多様な環境での動作と、活発な開発コミュニティによる将来的な発展が期待できるソフトウェアとなっています。

## 2.3 インストールとセットアップの基本

PAX SAPIENTICAを利用開始するための基本的なインストールとセットアップの手順について説明します。オープンソースソフトウェアであるため、主にソースコードからビルドする方法と、一部プラットフォーム向けに提供されている実行ファイルを利用する方法があります。

### ソースコードからのビルド:

* リポジトリのクローン: まず、公式GitHubリポジトリからPAX SAPIENTICAの最新のソースコード一式をローカル環境にダウンロード（クローン）します。Gitコマンドラインツールを使用する場合、以下のコマンドを実行します。 `git clone https://github.com/AsPJT/PAX_SAPIENTICA.git`
* CMakeを用いたビルド: クローンしたディレクトリ内で、CMakeを使用してビルド設定を行い、その後コンパイルを実行します。Visual Studio Code (VS Code) などの統合開発環境（IDE）とCMake拡張機能を利用すると、このプロセスを比較的容易に進めることができます。具体的なコマンドはOSや選択するコンパイラ、GUIライブラリによって異なりますが、一般的な流れとしては、ビルド用ディレクトリを作成し、そこでCMakeを実行してプロジェクトファイルを生成、その後makeやMSBuildなどのビルドコマンドを実行します。詳細な手順については、リポジトリ内のREADMEファイルや開発者向けドキュメントを参照してください。
* 依存ライブラリの確認: PAX SAPIENTICAが依存する外部ライブラリ（例えば、SFML、OpenSiv3D、DxLibなど）がシステムに正しくインストールされているか、あるいはプロジェクト内に含まれているかを確認する必要があります。依存関係が満たされていない場合、ビルドエラーが発生する可能性があります。必要なライブラリとそのバージョンについては、公式ドキュメントで確認してください。

### Windows向け簡易実行:

Windowsユーザー向けには、SFML v3.0.0を使用したバージョンが、Visual Studioのソリューションファイル（.sln）形式で提供されており、これは事前のインストール作業なしに利用可能です。この場合、Visual Studio（Community版など無償で利用可能なものもあります）でソリューションファイルを開き、ビルド・実行することでPAX SAPIENTICAを起動できます。

### 基本的な動作確認:

インストールまたはビルドが正常に完了したら、PAX SAPIENTICAを起動し、基本的な地図表示やUI操作が可能であるかを確認します。サンプルデータやチュートリアルプロジェクトを読み込んでみるのも良いでしょう。

## 2.4 ドキュメントリソースとコミュニティ

PAX SAPIENTICAを効果的に利用し、また開発に参加するためには、提供されているドキュメントリソースやコミュニティを活用することが重要です。

### 公式GitHubリポジトリ:

ソフトウェアのソースコード、基本的な説明、最新情報などが集約されている中心的な場所です。URL: https://github.com/AsPJT/PAX_SAPIENTICA

### コードドキュメント:

ソースコードレベルでの詳細な技術情報、API仕様などが提供されています。URL: https://aspjt.github.io/PAX_SAPIENTICA/

### READMEファイル:

リポジトリのルートディレクトリには、英語の README.md および日本語の README_JP.md が配置されており、ソフトウェアの概要、特徴、基本的な使い方などが記載されています。これらは最初に目を通すべき重要なドキュメントです。

### コントリビューションガイド:

CONTRIBUTING.md というファイル名で、バグ報告の方法、機能改善の提案方法、ソースコードへの貢献手順など、プロジェクトへの参加方法に関するガイドラインが提供されています。

### IssueトラッカーとPull Request:

GitHubリポジトリのIssueセクションでは、バグ報告、機能要望、質疑応答などが行われています。また、Pull Requestを通じて、ユーザーが開発したコード修正や機能追加を本体に取り込むための提案とレビューが行われます。これらは、開発コミュニティとの活発なやり取りの場となります。

### Wikiページ:

GitHubリポジトリにはWiki機能も備わっており、より詳細なマニュアル、チュートリアル、利用例などが蓄積されています。

### Documents フォルダ:
リポジトリ内には Documents フォルダが存在し、ここに追加のドキュメントファイル（仕様書、設計資料など）が格納されています。

### まとめ
これらのリソースを積極的に活用することで、PAX SAPIENTICAの理解を深め、問題解決のヒントを得たり、開発コミュニティに参加したりすることができます。オープンソースプロジェクトであるため、ユーザーからのフィードバックや貢献がソフトウェアの発展にとって非常に重要です。

# 第3章：PAX SAPIENTICAの基本操作とGIS機能

本章では、PAX SAPIENTICAを実際に操作する上で基本となるユーザーインターフェースの概要と、本ソフトウェアの強力な基盤機能である地理情報システム（GIS）の活用方法について解説します。歴史的空間情報を効果的に扱い、可視化するためのPAX SAPIENTICAの能力を理解することは、続くシミュレーション機能の活用においても不可欠です。

## 3.1 ユーザーインターフェース (GUI/CUIの概要)

PAX SAPIENTICAは、ユーザーのスキルレベルや利用目的に応じて選択可能な、グラフィカルユーザーインターフェース（GUI）とコマンドラインインターフェース（CUI）の双方を提供しています 1。この二つのインターフェースの提供は、視覚的な操作を好むユーザーや教育目的での利用者（GUIが適している）と、処理の自動化、大規模なデータ処理、あるいはサーバー環境での実行などを想定する上級ユーザー（CUIが適している）の双方のニーズに応えようとする開発思想の表れです。

### GUI (グラフィカルユーザーインターフェース):

GUI版では、マウス操作やメニュー選択を通じて、地図の表示、データの読み込み、シミュレーションの実行と結果の確認などを直感的に行うことができます。画面は、地図表示エリア、レイヤー管理パネル、ツールバー、パラメータ設定ウィンドウなどで構成されています。第2章で触れたように、SFML、OpenSiv3D、DxLibといった複数のGUIライブラリに対応しているため、選択するバージョンによって若干の見た目や操作感に違いがある可能性があります。GUIは、特にPAX SAPIENTICAを初めて使うユーザーや、インタラクティブにデータを探索・分析したい場合に適しています。

### CUI (コマンドラインインターフェース):

CUI版では、ターミナルやコマンドプロンプトからコマンドを入力してPAX SAPIENTICAを操作します。設定ファイルや入力データをコマンドライン引数で指定し、シミュレーションを実行したり、データ処理を行ったりすることが可能です。CUIは、一連の処理をスクリプト化して自動実行する場合や、複数のパラメータセットで繰り返しシミュレーションを行うバッチ処理、あるいはGUI環境のないサーバーでの実行などに非常に有効です。また、他のプログラムとの連携も容易になるという利点があります。

### まとめ
ユーザーは自身の目的や作業スタイルに応じて、GUIとCUIを使い分けることができます。例えば、初期のモデル構築やパラメータ探索はGUIでインタラクティブに行い、固まったモデルでの大規模シミュレーションや感度分析はCUIで自動化するといった活用法が考えられます。

## 3.2 地理情報システム（GIS）機能の活用

PAX SAPIENTICAは、その名が示す通り強力なGIS機能を備えており、これが歴史シミュレーションの基盤となります。

### 地図データの表示と操作:

PAX SAPIENTICAは、XYZタイル形式の地図データをサポートしています。XYZタイルは、ウェブマッピングで広く用いられている形式で、異なるズームレベルに応じた地図画像をタイル状に配置・表示する仕組みです。これにより、広大な地域を概観する縮尺から、特定の地点を詳細に表示する大縮尺まで、シームレスな地図表示とナビゲーションが可能になります。ユーザーは、マウス操作による地図の拡大・縮小、表示範囲の移動（パンニング）といった基本的な地図操作を直感的に行うことができます。また、複数の地図レイヤー（例えば、基本地形図、航空写真、ユーザーが追加したデータレイヤーなど）を重ねて表示し、それらの表示/非表示を切り替えるレイヤー管理機能も備わっています。

### 歴史的地理空間データのインポートと管理:

PAX SAPIENTICAの大きな特徴の一つは、ユーザーが独自の地理空間データをシステムにインポートし、地図上に追加・表示できる柔軟性です。これにより、研究者は自身が収集・作成した特定の時代や地域に関する詳細な情報（例えば、7世紀の古墳の位置と形状、令制国の境界線、古代の交通路、遺跡の分布など）を、シミュレーションの背景や分析対象として直接システムに取り込むことができます。この「地物を自由に追加できる」という機能は、既存の汎用GISデータセットだけでは表現しきれない、ニッチな研究テーマや未だデジタル化が進んでいない歴史的空間情報を用いた独自の分析を可能にし、研究のオーダーメイド性を飛躍的に高めます。

データのインポート形式としては、特にTSV（タブ区切りテキスト）形式が中心的に用いられます。TSVファイルはシンプルなテキスト形式であるため、ユーザーが比較的容易に作成・編集できるという利点があります。具体的なインポート手順や、TSVファイル内で地理情報（座標、属性など）をどのように記述するかについては、第5章でさらに詳しく解説します。

### 環境復元機能:

歴史を扱う上で、地理的環境は時代と共に変化するという事実は無視できません。例えば、海岸線の変動、河川流路の変更、植生の変化、気候変動による影響などが挙げられます。PAX SAPIENTICAは、各時代の地理的環境（地形、植生、水系など）を復元し、それをシミュレーションの背景として利用するための機能を備えています。この環境復元機能により、シミュレーションのリアリティと精度が向上し、例えば特定の時代の環境条件下での人々の居住可能な範囲や移動パターン、資源利用の可能性などをより現実的に評価することができます。この機能がシミュレーションの結果にどのような影響を与えるかについては、第4章でさらに考察します。

### まとめ
これらのGIS機能を活用することで、ユーザーは歴史的事象が発生した地理的文脈を深く理解し、それを踏まえた上でより精緻なシミュレーションモデルを構築することが可能になります。

## 3.3 歴史情報の可視化手法

PAX SAPIENTICAは、GIS機能とシミュレーション機能を組み合わせることで、多様な歴史情報を効果的に可視化し、ユーザーの理解と分析を支援します。

### 暦表示、人物移動、地形・地物表示:
歴史研究では、多様な時間尺度が用いられます。文献史学では元号や王朝暦、考古学では相対編年（例：弥生時代前期・中期・後期）、そして人類学や自然科学的手法では放射性炭素年代測定に基づく較正年代（cal BP、BP（Before Present））といった絶対年代が用いられます。PAX SAPIENTICAは、これらの異なる種類の暦や年代情報を統合的に扱い、時間軸上で同期させて表示する機能の重要性を認識しており、その実現を目指しています。これにより、異なる情報源からのデータを時間的に整合させながら分析することが可能になります。

歴史上の人物や集団が時間と共にどのように空間を移動したか、その軌跡を地図上にアニメーションや静止画で表示することができます。また、特定の年代に存在したとされる地形や考古学的な地物、例えば古墳群や弥生時代の環濠集落などを、当時の推定される姿で地図上に復元・表示する機能も備えています。


### DNAハプログループデータの表示と分析:

PAX SAPIENTICAのユニークな機能の一つに、古代人骨から得られるミトコンドリアDNA（mtDNA）ハプログループのデータを扱い、その時空間的な分布の変化を地図上にアニメーション表示する能力があります。ハプログループは、共通の祖先を持つ母系の遺伝的系統を示すマーカーであり、その分布や頻度の変化を追跡することで、過去の人類集団の移動、混合、置換といった歴史的プロセスを推定する手がかりとなります。

例えば、mtDNA-Owari.gif は、尾張地方における特定の年代範囲（紀元前950年～紀元前100年）でのmtDNAハプログループの構成割合の変化をABSの出力として示したものです。これらの可視化機能は、人類の移動史や集団間の遺伝的関係性に関する研究に、新たな分析ツールと表現手段を提供します。これらの多彩な可視化手法を通じて、PAX SAPIENTICAは複雑な歴史情報をより分かりやすく提示し、研究者や学習者が新たな発見や深い洞察を得ることを支援します。

# 第4章：エージェントベースシミュレーション（ABS）の核心

本章では、PAX SAPIENTICAの最も特徴的な機能であるエージェントベースシミュレーション（ABS）について、その概念から具体的なモデル設計、そして相互作用のメカニズムに至るまでを詳細に解説します。歴史を個々の主体の行動と相互作用の積み重ねとして捉え、その動的なプロセスを再現・分析するためのABSの強力な可能性を明らかにします。

## 4.1 PAX SAPIENTICAにおけるABSの概念と目的

エージェントベースシミュレーション（ABS）とは、自律的な意思決定を行う主体である「エージェント」のミクロレベルでの行動と、エージェント同士やエージェントと環境との間の相互作用をコンピュータ上でモデル化し、それらが集合的にどのようなマクロレベルの現象やパターン（例えば、集落の形成・発展、人口の増減や分布の変化、文化や技術の拡散、社会構造の変動など）を創発するのかを探求するための計算モデル手法です。各エージェントは、自身の内部状態（年齢、性別、資源保有量など）や、周囲の環境情報、他のエージェントの状態に基づいて、あらかじめ定義された一連のルールに従って行動します。

PAX SAPIENTICAでは、このABSという手法を用いて、過去の人々や集団の行動に関する様々な仮説を検証し、歴史的なプロセスや社会変動の動態を推定・理解することを主な目的としています。特に、文献史料が乏しい時代や地域における人口動態、社会組織、文化変容のメカニズムを解明する上で、ABSは強力なツールとなり得ます。例えば、「もし特定の技術が導入されたら、人々の生活や集落のあり方はどのように変化しただろうか？」あるいは「気候変動が食糧生産に影響を与えた結果、人口移動はどのように発生しただろうか？」といった問いに対して、ABSは具体的なシナリオに基づいた仮想実験（シミュレーション）を通じて、可能性のある答えを提示してくれます。

## 4.2 シミュレーション環境の構築

ABSを実行するためには、まずエージェントが活動する「舞台」となるシミュレーション環境を定義する必要があります。PAX SAPIENTICAでは、この環境を空間的側面と時間的側面から構築します。

### 空間の定義:

シミュレーションの空間は、セル（格子）ベースの2次元空間として表現されます。PAX SAPIENTICAでは、最小セル（空間の最小単位）のサイズを約125メートル四方（これはXYZ形式のウェブ地図タイルにおけるズームレベル10の1ピクセルに相当）といった具体的な値を設定しています。このセルの大きさは、シミュレーションの対象とする現象のスケールや、利用可能な計算資源に応じて調整されるべきものです。

この空間には、地理的な制約条件が設定されます。初期状態では、全世界の標高データやそれから計算される傾斜データがシステムに組み込まれており、これらがエージェントの行動、特に移動先の選択などに影響を与える要因となります。例えば、急峻な山岳地帯は平野部に比べて移動コストが高い、あるいは居住に適さないといった形でモデル化されます。

現状のPAX SAPIENTICAの環境定義では、標高と傾斜が主要な地理的要因として利用されていますが、将来的には、より現実に近いシミュレーションを行うために、河川の分布、気候条件（気温、降水量など）、土壌の種類や肥沃度、植生といった、より詳細な環境要因を導入する計画があります。これらの環境要因を詳細に設定することで、エージェントの居住地選択や食糧生産活動などをより現実的にモデル化できるようになります。

現在のバージョンで環境要因が比較的シンプルである（主に標高と傾斜に限定されている）点は、モデルの初期段階における複雑性と計算負荷、そして広域をカバーする詳細な古環境データの入手可能性との間でバランスを取った結果です。まず基本的な物理的制約を導入し、段階的に環境の解像度を高めていくというアプローチは、複雑なシステムをモデル化する際の一般的な戦略です。ユーザーは、シミュレーション結果を解釈する際にこの点を考慮しつつ、将来的な拡張性（より詳細な環境データの統合）にも期待を持つことができます。

### 時間の定義:

シミュレーションは、一定の時間ステップ（時間の最小単位）で進行します。この時間ステップは、例えば「1ヶ月」といった単位で設定されます。シミュレーションの総期間も定義する必要があり、例えば「弥生時代末期から奈良時代初期（西暦201年から725年まで）の約525年間」といった具体的な期間が設定されます。時間ステップの刻み幅や総期間は、分析対象とする歴史的プロセスの時間スケールに応じて適切に設定する必要があります。

## 4.3 エージェントの設計と定義

シミュレーションの中心となるのは「エージェント」です。PAX SAPIENTICAにおいて、エージェントは歴史上の個人や集団を抽象化したものであり、その属性と行動ルールを定義することがモデル設計の核心となります。

### エージェントの属性:

エージェントは、その状態や特性を表す様々な属性を持ちます。基本的な属性としては、以下のようなものがあります。

* 一意の識別子 (ID)
* 現在の位置（空間内のセル座標）
* 年齢、性別
* 生死の状態（生存、死亡）
* （集団エージェントの場合）構成員数、資源量など

これらに加えて、シミュレーションの目的や研究テーマに応じて、より専門的な属性を定義することができます。例えば、

* 所属する文化グループや言語系統
* 保有する技術のレベル（例：農耕技術、金属器製作技術）
* 遺伝的情報（例：ミトコンドリアDNAハプログループ 1、Y染色体ハプログループ）
* 社会的地位や階層
* 食料備蓄量、健康状態など。

PAX SAPIENTICAの弥生時代～古墳時代の人口動態シミュレーション事例では、「単位集団」を集落エージェントの基本単位とする考え方が採用されています。これは、個々の人間ではなく、ある程度のまとまりを持った生活共同体（例えば、小規模な村落や家族集団）をシミュレーション上の1エージェントとして扱うアプローチです。どのレベルの集団をエージェントとするかは、研究対象やデータの解像度によって決定されます。

### エージェントの行動原理とルールセット:

エージェントは、自身の内部状態（属性値）と、自身が置かれている周囲の環境情報（例：地形、資源の有無）、そして他のエージェントの状態や行動に基づいて、あらかじめ定義された一連のルールに従って行動を選択し、実行します。これらの行動ルールは、エージェントの意思決定プロセスをモデル化したものであり、シミュレーションのダイナミクスを駆動する原動力となります。代表的な行動ルールの例としては、以下のようなものが挙げられます。

* 移動: より良い環境（例：資源が豊富な場所、安全な場所）を求めて、あるいは社会的な理由（例：婚姻、集団分裂）によって空間内を移動する。
* 資源獲得: 食料、水、その他の生活に必要な資源を環境から獲得する。
* 社会形成: 他のエージェントと協力関係を結んだり、集団を形成したり、あるいは競争したりする。
* 婚姻・生殖: パートナーを見つけてペアを形成し、子孫を残す。
* 死亡: 寿命、飢餓、病気、捕食などによってエージェントがシミュレーションから除去される。

これらの行動ルールは、具体的な数式や論理条件（if-thenルールなど）によって記述され、PAX SAPIENTICAでは「サブモデル」として実装されます。次のセクションでは、これらのサブモデルについてさらに詳しく見ていきます。

## 4.4 主要シミュレーションモデル詳解

PAX SAPIENTICAでは、特に歴史的な人口動態を再現・分析するために、複数のサブモデルが実装されています。これらのサブモデルは、エージェントの主要な行動（移動、婚姻、出産など）を規定し、それぞれのロジックやパラメータは、考古学的知見、文献史料、人類学的研究などに基づいて設定されます。以下に、弥生時代末期から古墳時代にかけての日本列島における集落と人口の動態推定シミュレーションで用いられた主要なサブモデルについて、その概要と設定可能な主要パラメータを解説します。これらのサブモデルのパラメータを調整可能であることは、PAX SAPIENTICAが単一の固定的な歴史解釈を提示するのではなく、研究者が多様な仮説（例えば、「もし当時の平均寿命が現在考えられているよりも短かったら、人口動態はどのように変化したか？」）をこれらのパラメータ値として入力し、その結果を観察・比較検討するための「実験装置」としての性格を強く持っていることを示しています。

表: 主要サブモデルの概要と設定可能な主要パラメータ
|サブモデル名|目的/現象|主要ロジック概要|主要パラメータ (例)|パラメータの意味|設定例/単位|参考文献/根拠|
|:---|:---|:---|:---|:---|:---|:---|
|集団移動モデル|人口の空間的拡散、移住|一定確率でランダム移動。移動先は傾斜に基づく重み付き選択。|移動発生確率、最小移動距離、最大移動距離、傾斜別移動選択重み|エージェントが移動を開始する確率、一度の移動で進む距離の範囲、地形の険しさに応じた移動先の選好度|0.01 (1%/月)、800セル、8000セル、重み値 (例: 傾斜4度以下=9)|金井東裏遺跡人骨分析|
|婚姻モデル|家族形成、人口再生産の前提|一夫一妻制。特定年齢範囲で周囲の相手とランダムにペア形成。母方居住婚（単純化）。再婚可。|女性婚姻可能最低年齢、女性婚姻可能最高年齢、男性婚姻可能最低年齢、相手探索範囲|エージェントが婚姻を開始できる年齢、婚姻相手を探す空間的範囲|13歳、60歳、17歳、周囲60セル|鷲尾祐子(2003)、金隈遺跡寿命モデル|
|出産モデル|人口増加、世代交代|婚姻中の女性が一定の条件で出産。出産判定後、一定期間で子エージェント生成。死産率を考慮。|出産可能最低年齢、出産可能最高年齢、死産率、出産後次子生成までの期間|女性が出産できる年齢範囲、出産が成功しない確率|(婚姻可能年齢に準ずる)、0.10～0.14 (10～14%)|(婚姻モデルに準拠)、人口動態調整パラメータ|
|渡来モデル|外部からの人口流入|人口動態に影響する重要要素|年間渡来人数、渡来元、渡来者の属性|外部からシミュレーション空間に流入する人口の規模や特性|||
